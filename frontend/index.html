<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title id="page-title">Pak Nam Pran Kitesurfing - –ü—Ä–æ–≥–Ω–æ–∑ –≤–µ—Ç—Ä–∞ üèÑ‚Äç‚ôÇÔ∏è</title>

    <!-- PWA Meta Tags -->
    <meta name="description" id="page-description" content="–ü—Ä–æ–≥–Ω–æ–∑ –≤–µ—Ç—Ä–∞ –∏ —É—Å–ª–æ–≤–∏—è –¥–ª—è –∫–∞–π—Ç—Å–µ—Ä—Ñ–∏–Ω–≥–∞ –≤ –ü–∞–∫ –ù–∞–º –ü—Ä–∞–Ω, –¢–∞–∏–ª–∞–Ω–¥. –ñ–∏–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –≤–µ—Ç—Ä–µ, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –ø–æ–≥–æ–¥–µ –¥–ª—è –∫–∞–π—Ç–µ—Ä–æ–≤.">
    <meta name="keywords" content="–∫–∞–π—Ç—Å–µ—Ä—Ñ–∏–Ω–≥, –ø–∞–∫ –Ω–∞–º –ø—Ä–∞–Ω, —Ç–∞–∏–ª–∞–Ω–¥, –≤–µ—Ç–µ—Ä, –ø—Ä–æ–≥–Ω–æ–∑, kite, kitesurfing, wind forecast, pak nam pran">
    <meta name="author" content="Pak Nam Pran Kitesurfing">

    <!-- PWA Manifest -->
    <link rel="manifest" href="./manifest.json">

    <!-- PWA Theme Colors -->
    <meta name="theme-color" content="#0ea5e9">
    <meta name="msapplication-TileColor" content="#1e293b">
    <meta name="msapplication-config" content="./browserconfig.xml">

    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="./icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="72x72" href="./icons/icon-72x72.png">
    <link rel="apple-touch-icon" sizes="96x96" href="./icons/icon-96x96.png">
    <link rel="apple-touch-icon" sizes="128x128" href="./icons/icon-128x128.png">
    <link rel="apple-touch-icon" sizes="144x144" href="./icons/icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="./icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="192x192" href="./icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="384x384" href="./icons/icon-384x384.png">
    <link rel="apple-touch-icon" sizes="512x512" href="./icons/icon-512x512.png">

    <!-- Apple Mobile Web App -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Pak Nam Pran">

    <!-- Microsoft Tiles -->
    <meta name="msapplication-TileImage" content="./icons/icon-144x144.png">
    <meta name="msapplication-square70x70logo" content="./icons/icon-72x72.png">
    <meta name="msapplication-square150x150logo" content="./icons/icon-144x144.png">
    <meta name="msapplication-wide310x150logo" content="./icons/icon-384x384.png">
    <meta name="msapplication-square310x310logo" content="./icons/icon-384x384.png">

    <!-- Favicons -->
    <link rel="icon" type="image/png" sizes="32x32" href="./icons/icon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./icons/icon-16x16.png">
    <link rel="shortcut icon" href="./favicon.ico">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" id="og-title" content="Pak Nam Pran Kitesurfing - –ü—Ä–æ–≥–Ω–æ–∑ –≤–µ—Ç—Ä–∞">
    <meta property="og:description" id="og-description" content="–ü—Ä–æ–≥–Ω–æ–∑ –≤–µ—Ç—Ä–∞ –∏ —É—Å–ª–æ–≤–∏—è –¥–ª—è –∫–∞–π—Ç—Å–µ—Ä—Ñ–∏–Ω–≥–∞ –≤ –ü–∞–∫ –ù–∞–º –ü—Ä–∞–Ω, –¢–∞–∏–ª–∞–Ω–¥">
    <meta property="og:image" content="./icons/icon-512x512.png">
    <meta property="og:url" content="https://paknampran.com">
    <meta property="og:site_name" content="Pak Nam Pran Kitesurfing">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" id="twitter-title" content="Pak Nam Pran Kitesurfing - –ü—Ä–æ–≥–Ω–æ–∑ –≤–µ—Ç—Ä–∞">
    <meta name="twitter:description" id="twitter-description" content="–ü—Ä–æ–≥–Ω–æ–∑ –≤–µ—Ç—Ä–∞ –∏ —É—Å–ª–æ–≤–∏—è –¥–ª—è –∫–∞–π—Ç—Å–µ—Ä—Ñ–∏–Ω–≥–∞ –≤ –ü–∞–∫ –ù–∞–º –ü—Ä–∞–Ω, –¢–∞–∏–ª–∞–Ω–¥">
    <meta name="twitter:image" content="./icons/icon-512x512.png">

    <!-- External CSS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Poppins:wght@300;400;600;700&family=Dancing+Script:wght@700&family=Pacifico&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

    <!-- Main Application Styles -->
    <link rel="stylesheet" href="./css/main.css?v=2.3.0">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'ocean': {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        }
                    },
                    fontFamily: {
                        'poppins': ['Poppins', 'sans-serif'],
                        'dancing': ['Dancing Script', 'cursive'],
                        'pacifico': ['Pacifico', 'cursive']
                    }
                }
            }
        }
    </script>
</head>
<body>
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π —Å–∏–Ω–∏–π –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Ñ–æ–Ω (iOS compatible) -->
    <div style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(180deg, #2C5F7E 0%, #1E4A66 50%, #1A3A52 100%); z-index: -3;"></div>

    <!-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω —Å –∫–∞–π—Ç–∞–º–∏ -->
    <div class="kite-background">
        <!-- –û–±–ª–∞–∫–∞ -->
        <svg class="cloud cloud-1" width="100" height="60" viewBox="0 0 100 60">
            <ellipse cx="25" cy="35" rx="25" ry="20"/>
            <ellipse cx="45" cy="30" rx="30" ry="25"/>
            <ellipse cx="70" cy="35" rx="25" ry="20"/>
        </svg>
        <svg class="cloud cloud-2" width="120" height="70" viewBox="0 0 120 70">
            <ellipse cx="30" cy="40" rx="30" ry="25"/>
            <ellipse cx="60" cy="35" rx="35" ry="30"/>
            <ellipse cx="90" cy="40" rx="28" ry="23"/>
        </svg>

        <!-- –õ–µ—Ç–∞—é—â–∏–µ –∫–∞–π—Ç—ã -->
        <div class="flying-kite kite-1">
            <svg width="100" height="100" viewBox="0 0 100 100">
                <defs>
                    <linearGradient id="kite1Grad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#FF6B6B;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#FF8E53;stop-opacity:1" />
                    </linearGradient>
                </defs>
                <path d="M50,10 Q70,30 50,50 Q30,30 50,10" fill="url(#kite1Grad)"/>
                <path d="M50,50 Q55,70 50,90" stroke="#333" stroke-width="1" fill="none" opacity="0.3"/>
                <path d="M45,85 Q50,87 55,85" stroke="#333" stroke-width="0.5" fill="none" opacity="0.3"/>
            </svg>
        </div>

        <div class="flying-kite kite-2">
            <svg width="110" height="110" viewBox="0 0 110 110">
                <defs>
                    <linearGradient id="kite2Grad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#4ECDC4;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#44A08D;stop-opacity:1" />
                    </linearGradient>
                </defs>
                <path d="M55,15 Q75,35 55,55 Q35,35 55,15" fill="url(#kite2Grad)"/>
                <path d="M55,55 Q60,75 55,95" stroke="#333" stroke-width="1" fill="none" opacity="0.3"/>
            </svg>
        </div>

        <div class="flying-kite kite-3">
            <svg width="90" height="90" viewBox="0 0 90 90">
                <defs>
                    <linearGradient id="kite3Grad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#667EEA;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#764BA2;stop-opacity:1" />
                    </linearGradient>
                </defs>
                <path d="M45,8 Q65,28 45,45 Q25,28 45,8" fill="url(#kite3Grad)"/>
                <path d="M45,45 Q48,65 45,85" stroke="#333" stroke-width="1" fill="none" opacity="0.3"/>
            </svg>
        </div>

        <div class="flying-kite kite-4">
            <svg width="95" height="95" viewBox="0 0 95 95">
                <defs>
                    <linearGradient id="kite4Grad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#F093FB;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#F5576C;stop-opacity:1" />
                    </linearGradient>
                </defs>
                <path d="M47.5,12 Q67,32 47.5,50 Q28,32 47.5,12" fill="url(#kite4Grad)"/>
                <path d="M47.5,50 Q52,70 47.5,90" stroke="#333" stroke-width="1" fill="none" opacity="0.3"/>
            </svg>
        </div>

        <div class="flying-kite kite-5">
            <svg width="105" height="105" viewBox="0 0 105 105">
                <defs>
                    <linearGradient id="kite5Grad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#FDBB2D;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#22C1C3;stop-opacity:1" />
                    </linearGradient>
                </defs>
                <path d="M52.5,13 Q72,33 52.5,52 Q33,33 52.5,13" fill="url(#kite5Grad)"/>
                <path d="M52.5,52 Q57,72 52.5,92" stroke="#333" stroke-width="1" fill="none" opacity="0.3"/>
            </svg>
        </div>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –º–µ–Ω—é -->
    <button id="menuButton" class="menu-button" aria-label="Settings menu">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M12 1v6m0 6v6m-9-9h6m6 0h6"></path>
        </svg>
    </button>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <header class="text-center py-8 sm:py-12 animate-fadeInDown">
            <h1 class="font-dancing text-5xl sm:text-6xl lg:text-7xl font-bold bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-600 bg-clip-text text-transparent drop-shadow-lg mb-4 tracking-wide animate-shimmer">
                Pak Nam Pran
            </h1>
        </header>

        <div class="wind-dashboard">
            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –æ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã —Å—Ç–∞–Ω—Ü–∏–∏ (—Å–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
            <div id="offlineNotice" style="display: none; background: rgba(255,165,0,0.15); backdrop-filter: blur(10px); border-radius: 20px; padding: 30px; margin-bottom: 15px; border: 2px solid rgba(255,165,0,0.3); text-align: center;">
                <div style="font-size: 3rem; margin-bottom: 15px;">üåô</div>
                <div style="font-size: 1.5rem; font-weight: 600; color: #fff; margin-bottom: 10px;" data-i18n="info.stationOffline">Station Offline</div>
                <div style="font-size: 1rem; color: rgba(255,255,255,0.9); line-height: 1.6;" id="offlineNoticeText" data-i18n="info.offlineNoticeText">
                    Wind data is collected only from <strong>6:00 to 19:00</strong> (Thailand time).<br>
                    Please return during working hours for current data.
                </div>
            </div>

            <!-- –£–ø—Ä–æ—â—ë–Ω–Ω—ã–π –±–ª–æ–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤–µ—Ç—Ä–µ —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–º –±–∞—Ä–æ–º -->
            <div id="currentWindSection" style="background: rgba(255,255,255,0.15); backdrop-filter: blur(10px); border-radius: 20px; padding: 20px; margin-bottom: 15px; border: 1px solid rgba(255,255,255,0.2);">
                <!-- –û—Å–Ω–æ–≤–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <div style="text-align: center; flex: 1;">
                        <div style="font-size: 3rem; font-weight: 700; color: #fff; line-height: 1;" id="windSpeed">--</div>
                        <div style="font-size: 0.9rem; color: rgba(255,255,255,0.8); margin-top: 5px;" id="windSpeedUnit">kn</div>
                    </div>
                    <div style="text-align: center; flex: 1;">
                        <div style="font-size: 3rem; font-weight: 700; color: #fff;" id="windCardinal">N</div>
                        <div style="font-size: 0.9rem; color: rgba(255,255,255,0.8); margin-top: 5px;" data-i18n="info.direction">direction</div>
                    </div>
                </div>

                <!-- –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π –±–∞—Ä —Å–∏–ª—ã –≤–µ—Ç—Ä–∞ -->
                <div style="margin: 20px 0;">
                    <div style="position: relative; height: 40px; background: linear-gradient(to right, #87CEEB 0%, #87CEEB 30%, #00FF00 37%, #00FF00 57%, #FFD700 70%, #FFA500 82%, #FF4500 92%, #8B0000 100%); border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.3);">
                        <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ç–µ–∫—É—â–µ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ -->
                        <div id="windSpeedIndicator" style="position: absolute; top: -5px; bottom: -5px; width: 4px; background: #fff; border-radius: 2px; box-shadow: 0 0 10px rgba(255,255,255,0.8), 0 0 20px rgba(255,255,255,0.5); left: 0%; transition: left 0.5s ease-out;"></div>
                    </div>
                    <!-- –ú–µ—Ç–∫–∏ –Ω–∞ –±–∞—Ä–µ -->
                    <div id="windBarLabels" style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 0.7rem; color: rgba(255,255,255,0.7);">
                        <span>0</span>
                        <span>5</span>
                        <span>10</span>
                        <span>15</span>
                        <span>20</span>
                        <span>25</span>
                        <span>30+</span>
                    </div>
                </div>

                <!-- –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                <div style="display: flex; gap: 15px; justify-content: space-around; margin-top: 20px; font-size: 0.85rem; color: rgba(255,255,255,0.9);">
                    <div style="text-align: center;">
                        <div style="opacity: 0.7;" data-i18n="info.gust">Gusts</div>
                        <div style="font-weight: 600; font-size: 1.1rem;">
                            <span id="windGust">--</span> <span style="font-size: 0.8rem; opacity: 0.8;" id="windGustUnit">kn</span>
                        </div>
                    </div>
                    <div style="text-align: center;">
                        <div style="opacity: 0.7;" data-i18n="info.maxGust">Max today</div>
                        <div style="font-weight: 600; font-size: 1.1rem;">
                            <span id="maxGust">--</span> <span style="font-size: 0.8rem; opacity: 0.8;" id="maxGustUnit">kn</span>
                        </div>
                    </div>
                </div>

                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–µ—Ç—Ä–µ -->
                <div style="margin-top: 20px; padding: 15px 20px; background: rgba(0,0,0,0.2); border-radius: 12px;">
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <div id="windIcon" style="font-size: 2.5rem; line-height: 1;">üçÉ</div>
                        <div style="flex: 1; text-align: left;">
                            <div id="windTitle" style="font-size: 1.1rem; font-weight: 600; color: #fff; margin-bottom: 3px;" data-i18n="trends.loading">Loading data...</div>
                            <div id="windSubtitle" style="font-size: 0.85rem; margin-top: 2px;">Please wait</div>
                            <!-- –¢—Ä–µ–Ω–¥ –≤–µ—Ç—Ä–∞ + —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –∫–∞–π—Ç–∞ -->
                            <div id="windTrend" style="margin-top: 8px; display: flex; align-items: center; gap: 8px;">
                                <div id="trendIcon" style="font-size: 1.3em;">‚è≥</div>
                                <div id="trendText" style="font-size: 0.8rem; line-height: 1.3;">--</div>
                                <span id="recommendedKite" style="font-size: 0.8rem; line-height: 1.3;"></span>
                            </div>
                            <!-- –¢—Ä–µ–Ω–¥ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
                            <div id="windDirTrend" style="margin-top: 4px; display: flex; align-items: center; gap: 8px;">
                                <div id="dirTrendIcon" style="font-size: 1.3em;"></div>
                                <div id="dirTrendText" style="font-size: 0.8rem; line-height: 1.3;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ö–∞—Ä—Ç–∞ -->
            <div id="mapSection" class="card" style="padding: 0; overflow: hidden;">
                <div class="map-container">
                    <div id="windMap"></div>

                    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä LIVE —Å —Ç–∞–π–º–µ—Ä–æ–º -->
                    <div class="live-indicator">
                        <span class="live-dot"></span>
                        <span data-i18n="info.live">LIVE</span>
                        <span id="updateCountdown" style="margin-left: 5px; font-size: 0.8em; opacity: 0.8;" data-i18n="app.loading">–∑–∞–≥—Ä—É–∑–∫–∞...</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ë–ª–æ–∫ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ —Ä–∞–∑–º–µ—Ä—É –∫–∞–π—Ç–∞ -->
        <div class="bg-white/15 backdrop-blur-md rounded-2xl p-3 sm:p-6 my-6 sm:my-8 animate-fadeIn" style="box-shadow: var(--md-sys-elevation-2);">
            <h2 class="text-center text-lg sm:text-2xl font-semibold text-white mb-3 sm:mb-6" data-i18n="kite.recommendation">
                ü™Å Kite Size Recommendation
            </h2>
            <div id="kiteSizeRecommendation" class="min-h-[180px] px-2 py-2">
                <div class="text-center py-6">
                    <div class="inline-block w-5 h-5 border-3 border-white/30 border-t-white rounded-full animate-spin mb-3"></div>
                    <p class="text-white/80 text-sm" data-i18n="trends.loading">Loading recommendations...</p>
                </div>
            </div>
            <div class="mt-4 text-center">
                <p class="text-xs text-white/60" data-i18n="kite.recommendationHint">
                    üí° Numbers show recommended rider weight for current conditions
                </p>
            </div>
        </div>

        <!-- –ë–ª–æ–∫ –≥—Ä–∞—Ñ–∏–∫–∞ –≤–µ—Ç—Ä–∞ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è (–∏—Å—Ç–æ—Ä–∏—è + –ø—Ä–æ–≥–Ω–æ–∑) -->
        <div class="bg-white/15 backdrop-blur-md rounded-2xl px-0 py-3 sm:p-6 -mx-4 sm:mx-0 my-6 sm:my-8 animate-fadeIn" style="box-shadow: var(--md-sys-elevation-2);">
            <h2 id="todayTimelineHeader" class="text-center text-lg sm:text-2xl font-semibold text-white mb-3 sm:mb-6 px-3 sm:px-0">
                <span data-i18n="history.todayTimeline">üìä Today's Wind Timeline</span>
                <span id="todayTimelineUnit" style="font-size: 0.7em; opacity: 0.8; margin-left: 8px;">(kn)</span>
            </h2>
            <div id="todayWindTimeline" class="overflow-hidden min-h-[120px]">
                <div class="text-center py-6">
                    <div class="inline-block w-5 h-5 border-3 border-white/30 border-t-white rounded-full animate-spin mb-3"></div>
                    <p class="text-white/80 text-sm" data-i18n="trends.loading">Loading data...</p>
                </div>
            </div>
        </div>

        <!-- –ë–ª–æ–∫ –ø—Ä–æ–≥–Ω–æ–∑–∞ –≤–µ—Ç—Ä–∞ -->
        <div class="bg-white/15 backdrop-blur-md rounded-2xl px-0 py-3 sm:p-6 -mx-4 sm:mx-0 my-6 sm:my-8 animate-fadeIn" style="box-shadow: var(--md-sys-elevation-2);">
            <h2 class="text-center text-lg sm:text-2xl font-semibold text-white mb-3 sm:mb-6 px-3 sm:px-0" data-i18n="forecast.title">
                üå™Ô∏è 3-Day Wind Forecast
            </h2>
            <div id="windForecast" class="overflow-hidden min-h-[120px]">
                <div class="text-center py-6">
                    <div class="inline-block w-5 h-5 border-3 border-white/30 border-t-white rounded-full animate-spin mb-3"></div>
                    <p class="text-white/80 text-sm" data-i18n="trends.loading">Loading forecast...</p>
                </div>
            </div>

        </div>

        <!-- –ë–ª–æ–∫ –∏—Å—Ç–æ—Ä–∏–∏ –≤–µ—Ç—Ä–∞ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π -->
        <div class="bg-white/15 backdrop-blur-md rounded-2xl px-0 py-3 sm:p-6 -mx-4 sm:mx-0 my-6 sm:my-8 animate-fadeIn" style="box-shadow: var(--md-sys-elevation-2);">
            <h2 class="text-center text-lg sm:text-2xl font-semibold text-white mb-3 sm:mb-6 px-3 sm:px-0" data-i18n="history.weekHistory">
                üìà 7-Day Wind History
            </h2>
            <div id="weekWindHistory" class="overflow-hidden min-h-[120px]">
                <div class="text-center py-6">
                    <div class="inline-block w-5 h-5 border-3 border-white/30 border-t-white rounded-full animate-spin mb-3"></div>
                    <p class="text-white/80 text-sm" data-i18n="trends.loading">Loading history...</p>
                </div>
            </div>
        </div>

        <!-- –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
        <div id="settingsMenu" class="settings-menu">
            <div class="settings-menu__overlay"></div>
            <div class="settings-menu__panel">
                <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
                <div class="settings-menu__header">
                    <h2 id="menuTitle" data-i18n="menu.title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                    <button id="closeMenuButton" class="settings-menu__close" aria-label="Close settings">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
                <div class="settings-menu__content">
                    <!-- –°–µ–∫—Ü–∏—è —è–∑—ã–∫–∞ -->
                    <section class="settings-section">
                        <h3 id="languageTitle" data-i18n="menu.language">–Ø–∑—ã–∫</h3>
                        <div class="language-selector">
                            <button class="language-option" data-lang="en">
                                üá¨üáß English
                            </button>
                            <button class="language-option" data-lang="ru">
                                üá∑üá∫ –†—É—Å—Å–∫–∏–π
                            </button>
                            <button class="language-option" data-lang="de">
                                üá©üá™ Deutsch
                            </button>
                            <button class="language-option" data-lang="th">
                                üáπüá≠ ‡πÑ‡∏ó‡∏¢
                            </button>
                        </div>
                    </section>

                    <!-- –°–µ–∫—Ü–∏—è –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è -->
                    <section class="settings-section">
                        <h3 id="unitsTitle" data-i18n="menu.units">–ï–¥–∏–Ω–∏—Ü—ã —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤–µ—Ç—Ä–∞</h3>
                        <div class="units-selector">
                            <button class="unit-option" data-unit="knots">
                                <span class="unit-name" data-i18n="units.knots">–£–∑–ª—ã</span>
                                <span class="unit-symbol" data-i18n="units.knotsShort">—É–∑</span>
                            </button>
                            <button class="unit-option" data-unit="ms">
                                <span class="unit-name" data-i18n="units.metersPerSecond">–ú–µ—Ç—Ä—ã –≤ —Å–µ–∫—É–Ω–¥—É</span>
                                <span class="unit-symbol" data-i18n="units.msShort">–º/—Å</span>
                            </button>
                        </div>
                    </section>

                    <!-- –°–µ–∫—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Ä–∞–π–¥–µ—Ä–∞ -->
                    <section class="settings-section">
                        <h3 id="riderTitle" data-i18n="menu.riderPreferences">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–π–¥–µ—Ä–∞</h3>

                        <!-- –¢–∏–ø –¥–æ—Å–∫–∏ -->
                        <div class="rider-setting">
                            <label class="rider-setting-label" data-i18n="menu.boardType">–¢–∏–ø –¥–æ—Å–∫–∏</label>
                            <div class="board-type-selector">
                                <button class="board-type-option" data-board="twintip">
                                    <span class="board-type-icon">üèÑ</span>
                                    <span class="board-type-name" data-i18n="menu.twintip">–¢–≤–∏–Ω—Ç–∏–ø</span>
                                </button>
                                <button class="board-type-option" data-board="hydrofoil">
                                    <span class="board-type-icon">ü™Ç</span>
                                    <span class="board-type-name" data-i18n="menu.hydrofoil">–ì–∏–¥—Ä–æ—Ñ–æ–π–ª</span>
                                </button>
                            </div>
                        </div>

                        <!-- –í–µ—Å —Ä–∞–π–¥–µ—Ä–∞ -->
                        <div class="rider-setting">
                            <label class="rider-setting-label" for="riderWeight" data-i18n="menu.riderWeight">–í–µ—Å —Ä–∞–π–¥–µ—Ä–∞ (–∫–≥)</label>
                            <div class="rider-weight-input">
                                <input type="number" id="riderWeight" min="40" max="120" step="1" value="75" class="weight-input">
                                <div class="weight-buttons">
                                    <button class="weight-button weight-button--minus" data-action="decrease">-</button>
                                    <button class="weight-button weight-button--plus" data-action="increase">+</button>
                                </div>
                            </div>
                            <p class="text-xs text-white/60 mt-2" data-i18n="menu.weightHint">
                                –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –∫–∞–π—Ç–∞
                            </p>
                        </div>
                    </section>

                    <!-- –°–µ–∫—Ü–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
                    <section class="settings-section">
                        <h3 id="notificationsTitle" data-i18n="menu.notifications">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
                        <button id="notificationButton" class="notification-button px-6 py-3 rounded-xl font-semibold text-white transition-all duration-300 shadow-lg" style="width: 100%;">
                            üîî <span data-i18n="trends.loading">Loading...</span>
                        </button>
                        <p class="text-xs text-white/60 mt-2" data-i18n="notifications.description">
                            Get notified when wind is steady above 10 knots for 20 minutes (max once per day)
                        </p>
                        <p id="notificationStatus" class="notification-status"></p>
                    </section>
                </div>

                <!-- –§—É—Ç–µ—Ä –º–µ–Ω—é -->
                <div class="settings-menu__footer">
                    <p class="app-version"></p>
                </div>
            </div>
        </div>

        <footer>
            <p data-i18n="app.footer">&copy; 2025 Pak Nam Pran. Made with ‚ù§Ô∏è for kitesurfers</p>
            <p class="text-xs opacity-60 mt-2 version-number"></p>
        </footer>
    </div>

    <!-- Load Leaflet -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <!-- ES6 Module Import for App -->
    <script type="module">
        import App from './js/App.js?v=2.5.7';

        // Global app instance
        let jollyKiteApp;

        // Force Service Worker update
        const APP_VERSION = '2.5.7';
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then(registrations => {
                registrations.forEach(registration => {
                    console.log('Updating Service Worker...');
                    registration.update();
                });
            });
        }

        // Initialize the app when DOM is ready
        document.addEventListener('DOMContentLoaded', async function() {
            console.log(`Initializing JollyKite App v${APP_VERSION}...`);

            try {
                jollyKiteApp = new App();
                const success = await jollyKiteApp.init();

                if (success) {
                    console.log('JollyKite App initialized successfully!');

                    // Make app available globally for debugging
                    window.jollyKiteApp = jollyKiteApp;
                } else {
                    console.error('Failed to initialize JollyKite App');
                    showError('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.');
                }
            } catch (error) {
                console.error('Error initializing app:', error);
                showError('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.');
            }
        });

        // Error display function
        function showError(message) {
            const windTitle = document.getElementById('windTitle');
            const windSubtitle = document.getElementById('windSubtitle');
            const windIcon = document.getElementById('windIcon');

            if (windTitle) windTitle.textContent = '–û—à–∏–±–∫–∞';
            if (windSubtitle) windSubtitle.textContent = message;
            if (windIcon) windIcon.textContent = '‚ö†Ô∏è';
        }

        // Version check and Service Worker registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', async () => {
                // Import and initialize VersionManager
                const { default: VersionManager } = await import('./js/VersionManager.js');
                const versionManager = new VersionManager();

                // Check version and clear cache if needed
                const shouldProceed = await versionManager.init();
                if (!shouldProceed) {
                    // Page will reload, don't continue
                    return;
                }

                // Register Service Worker with forced update
                navigator.serviceWorker.register('./sw.js?v=2.3.0', {
                    updateViaCache: 'none'
                }).then(registration => {
                    console.log('‚úì Service Worker registered:', registration.scope);

                    // Check for updates every page load
                    registration.update().catch(err => {
                        console.warn('Service Worker update check failed:', err);
                    });

                    // Auto-reload when new service worker is activated
                    registration.addEventListener('updatefound', () => {
                        const newWorker = registration.installing;
                        newWorker.addEventListener('statechange', () => {
                            if (newWorker.state === 'activated') {
                                console.log('‚úì New Service Worker activated, reloading...');
                                window.location.reload();
                            }
                        });
                    });
                }).catch(err => console.log('‚úó Service Worker registration failed:', err));

                // Listen for messages from Service Worker (for language change reload)
                navigator.serviceWorker.addEventListener('message', event => {
                    if (event.data && event.data.type === 'RELOAD') {
                        console.log('‚úì Received reload request from Service Worker');
                        window.location.reload(true);
                    }
                });
            });
        }
    </script>
</body>
</html>